<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>TelepathyQt4: ClientRegistrar Class Reference</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
<a href="index.html">
<font color="#004faf">Home</font></a>&nbsp;&middot;
<a href="classes.html">
<font color="#004faf">All Classes</font></a>&nbsp;&middot;
<a href="namespaces.html">
<font color="#004faf">All Namespaces</font></a>&nbsp;&middot;
<a href="modules.html">
<font color="#004faf">Modules</font></a>&nbsp;&middot;
<a href="functions.html">
<font color="#004faf">Functions</font></a>&nbsp;&middot;
<a href="files.html">
<font color="#004faf">Files</font></a>
</td>
</tr>
</table>
</body>
</html>
<!-- Generated by Doxygen 1.5.9 -->
  <div class="navpath"><a class="el" href="namespaceTp.html">Tp</a>::<a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a>
  </div>
<div class="contents">
<h1>ClientRegistrar Class Reference</h1><!-- doxytag: class="Tp::ClientRegistrar" --><!-- doxytag: inherits="Tp::RefCounted" --><code>#include &lt;<a class="el" href="client-registrar_8h_source.html">TelepathyQt4/ClientRegistrar</a>&gt;</code>
<p>
Inherits <a class="el" href="classTp_1_1RefCounted.html">Tp::RefCounted</a>.
<p>

<p>
<a href="classTp_1_1ClientRegistrar-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classTp_1_1ClientRegistrar.html#c89cf0ff599684633c501909ea932523">~ClientRegistrar</a> ()
<li>QDBusConnection <a class="el" href="classTp_1_1ClientRegistrar.html#34657b625a3b937e4953745b6938c9a7">dbusConnection</a> () const 
<li>QList&lt; <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &gt; <a class="el" href="classTp_1_1ClientRegistrar.html#eceb059bd38be69d88589eb864709f6e">registeredClients</a> () const 
<li>bool <a class="el" href="classTp_1_1ClientRegistrar.html#f59f2bf9a4ed9926e13e0631eb53dd0b">registerClient</a> (const <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &amp;client, const QString &amp;clientName, bool unique=false)
<li>bool <a class="el" href="classTp_1_1ClientRegistrar.html#2933431f0b6a5040cc94b8d245b9919a">unregisterClient</a> (const <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &amp;client)
<li>void <a class="el" href="classTp_1_1ClientRegistrar.html#d47806367a94367fe070adba2c3b4ac0">unregisterClients</a> ()
</ul>
<h2>Static Public Member Functions</h2>
<ul>
<li>static <a class="el" href="classTp_1_1SharedPtr.html">ClientRegistrarPtr</a> <a class="el" href="classTp_1_1ClientRegistrar.html#299cab196b40998347caaa2ff798e8d9">create</a> (const QDBusConnection &amp;bus=QDBusConnection::sessionBus())
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Object responsible for registering <a href="http://telepathy.freedesktop.org">Telepathy</a> clients (Observer, Approver, Handler).<p>
Clients should inherit <a class="el" href="classTp_1_1AbstractClientObserver.html">AbstractClientObserver</a>, <a class="el" href="classTp_1_1AbstractClientApprover.html">AbstractClientApprover</a>, <a class="el" href="classTp_1_1AbstractClientHandler.html">AbstractClientHandler</a> or some combination of these, by using multiple inheritance, and register themselves using <a class="el" href="classTp_1_1ClientRegistrar.html#f59f2bf9a4ed9926e13e0631eb53dd0b">registerClient()</a>.<p>
See the individual classes descriptions for more details.<h2><a class="anchor" name="usage_sec">
Usage</a></h2>
<h3><a class="anchor" name="create_sec">
Creating an account manager object</a></h3>
One way to create a <a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a> object is to just call the create method. For example:<p>
<div class="fragment"><pre class="fragment"> <a class="code" href="namespaceTp.html#5ef7d4bfdf127e4f847fb1118b90b085">ClientRegistrarPtr</a> cr = <a class="code" href="classTp_1_1ClientRegistrar.html#299cab196b40998347caaa2ff798e8d9">ClientRegistrar::create</a>(); 
</pre></div><p>
You can also provide a D-Bus connection as a QDBusConnection:<p>
<div class="fragment"><pre class="fragment"> <a class="code" href="namespaceTp.html#5ef7d4bfdf127e4f847fb1118b90b085">ClientRegistrarPtr</a> cr = <a class="code" href="classTp_1_1ClientRegistrar.html#299cab196b40998347caaa2ff798e8d9">ClientRegistrar::create</a>(QDBusConnection::systemBus()); 
</pre></div><h3><a class="anchor" name="registering_sec">
Registering a client</a></h3>
To register a client, just call registerClient with a given AbstractClientPtr pointing to a valid <a class="el" href="classTp_1_1AbstractClient.html">AbstractClient</a> instance.<p>
<div class="fragment"><pre class="fragment"> <span class="keyword">class </span>MyClient : <span class="keyword">public</span> AbstractClientObserver, <span class="keyword">public</span> AbstractClientHandler
 {
     ...
 };

 ...

 <a class="code" href="namespaceTp.html#5ef7d4bfdf127e4f847fb1118b90b085">ClientRegistrarPtr</a> cr = <a class="code" href="classTp_1_1ClientRegistrar.html#299cab196b40998347caaa2ff798e8d9">ClientRegistrar::create</a>();
 SharedPtr&lt;MyClient&gt; client = SharedPtr&lt;MyClient&gt;(<span class="keyword">new</span> MyClient(...));
 cr-&gt;registerClient(<a class="code" href="classTp_1_1SharedPtr.html#e61b10e923ed01d7e58f110f9a8e21ad">AbstractClientPtr::dynamicCast</a>(client), <span class="stringliteral">"myclient"</span>);
</pre></div><p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classTp_1_1AbstractClientObserver.html">AbstractClientObserver</a>, <a class="el" href="classTp_1_1AbstractClientApprover.html">AbstractClientApprover</a>, <a class="el" href="classTp_1_1AbstractClientHandler.html">AbstractClientHandler</a> </dd></dl>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c89cf0ff599684633c501909ea932523"></a><!-- doxytag: member="Tp::ClientRegistrar::~ClientRegistrar" ref="c89cf0ff599684633c501909ea932523" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Class destructor. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="299cab196b40998347caaa2ff798e8d9"></a><!-- doxytag: member="Tp::ClientRegistrar::create" ref="299cab196b40998347caaa2ff798e8d9" args="(const QDBusConnection &amp;bus=QDBusConnection::sessionBus())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTp_1_1SharedPtr.html">ClientRegistrarPtr</a> create           </td>
          <td>(</td>
          <td class="paramtype">const QDBusConnection &amp;&nbsp;</td>
          <td class="paramname"> <em>bus</em> = <code>QDBusConnection::sessionBus()</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new client registrar object using the given <em>bus</em>.<p>
<a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a> instances are unique per D-Bus connection. The returned ClientRegistrarPtr will point to the same <a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a> instance on successive calls with the same <em>bus</em>, unless the instance had already been destroyed, in which case a new instance will be returned.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bus</em>&nbsp;</td><td>QDBusConnection to use. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A ClientRegistrarPtr object pointing to the <a class="el" href="classTp_1_1ClientRegistrar.html">ClientRegistrar</a>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="34657b625a3b937e4953745b6938c9a7"></a><!-- doxytag: member="Tp::ClientRegistrar::dbusConnection" ref="34657b625a3b937e4953745b6938c9a7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QDBusConnection dbusConnection           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the D-Bus connection being used by this client registrar.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>QDBusConnection being used. </dd></dl>

</div>
</div><p>
<a class="anchor" name="eceb059bd38be69d88589eb864709f6e"></a><!-- doxytag: member="Tp::ClientRegistrar::registeredClients" ref="eceb059bd38be69d88589eb864709f6e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &gt; registeredClients           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a list of clients registered using registerClient on this client registrar.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A list of registered clients. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classTp_1_1ClientRegistrar.html#f59f2bf9a4ed9926e13e0631eb53dd0b">registerClient()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="f59f2bf9a4ed9926e13e0631eb53dd0b"></a><!-- doxytag: member="Tp::ClientRegistrar::registerClient" ref="f59f2bf9a4ed9926e13e0631eb53dd0b" args="(const AbstractClientPtr &amp;client, const QString &amp;clientName, bool unique=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool registerClient           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>clientName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>unique</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register a client on D-Bus.<p>
The client registrar will export the appropriate D-Bus interfaces, based on the abstract classes subclassed by <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client.</em>&nbsp;</td><td>If each of a client instance should be able to manipulate channels separately, set unique to true.</td></tr>
  </table>
</dl>
The client name MUST be a non-empty string of ASCII digits, letters, dots and/or underscores, starting with a letter, and without sets of two consecutive dots or a dot followed by a digit.<p>
This method will do nothing if the client is already registered, and <code>true</code> will be returned.<p>
To unregister a client use <a class="el" href="classTp_1_1ClientRegistrar.html#2933431f0b6a5040cc94b8d245b9919a">unregisterClient()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client</em>&nbsp;</td><td>The client to register. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clientName</em>&nbsp;</td><td>The client name used to register. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>unique</em>&nbsp;</td><td>Whether each of a client instance is able to manipulate channels separately. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>true</code> if client was successfully registered, <code>false</code> otherwise. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classTp_1_1ClientRegistrar.html#eceb059bd38be69d88589eb864709f6e">registeredClients()</a>, <a class="el" href="classTp_1_1ClientRegistrar.html#2933431f0b6a5040cc94b8d245b9919a">unregisterClient()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="2933431f0b6a5040cc94b8d245b9919a"></a><!-- doxytag: member="Tp::ClientRegistrar::unregisterClient" ref="2933431f0b6a5040cc94b8d245b9919a" args="(const AbstractClientPtr &amp;client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool unregisterClient           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTp_1_1SharedPtr.html">AbstractClientPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>client</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unregister a client registered using registerClient on this client registrar.<p>
If <em>client</em> was not registered previously, <code>false</code> will be returned.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client</em>&nbsp;</td><td>The client to unregister. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>true</code> if client was successfully unregistered, <code>false</code> otherwise. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classTp_1_1ClientRegistrar.html#eceb059bd38be69d88589eb864709f6e">registeredClients()</a>, <a class="el" href="classTp_1_1ClientRegistrar.html#f59f2bf9a4ed9926e13e0631eb53dd0b">registerClient()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="d47806367a94367fe070adba2c3b4ac0"></a><!-- doxytag: member="Tp::ClientRegistrar::unregisterClients" ref="d47806367a94367fe070adba2c3b4ac0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unregisterClients           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unregister all clients registered using registerClient on this client registrar.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classTp_1_1ClientRegistrar.html#eceb059bd38be69d88589eb864709f6e">registeredClients()</a>, <a class="el" href="classTp_1_1ClientRegistrar.html#f59f2bf9a4ed9926e13e0631eb53dd0b">registerClient()</a>, <a class="el" href="classTp_1_1ClientRegistrar.html#2933431f0b6a5040cc94b8d245b9919a">unregisterClient()</a> </dd></dl>

</div>
</div><p>
</div>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2009 Collabora Ltd. and Nokia Corporation</td>
<td width="30%" align="right"><div align="right">Telepathy-Qt4 0.1.10</div></td>
</tr></table></div></address>
</body>
</html>
