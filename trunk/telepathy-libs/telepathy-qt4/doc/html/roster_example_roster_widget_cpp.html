<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>TelepathyQt4: roster/roster-widget.cpp</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
<a href="index.html">
<font color="#004faf">Home</font></a>&nbsp;&middot;
<a href="classes.html">
<font color="#004faf">All Classes</font></a>&nbsp;&middot;
<a href="namespaces.html">
<font color="#004faf">All Namespaces</font></a>&nbsp;&middot;
<a href="modules.html">
<font color="#004faf">Modules</font></a>&nbsp;&middot;
<a href="functions.html">
<font color="#004faf">Functions</font></a>&nbsp;&middot;
<a href="files.html">
<font color="#004faf">Files</font></a>
</td>
</tr>
</table>
</body>
</html>
<!-- Generated by Doxygen 1.5.9 -->
<div class="contents">
<h1><a class="anchor" name="roster_example_roster_widget_cpp">roster/roster-widget.cpp </a></h1><div class="fragment"><pre class="fragment"><span class="comment">/*</span>
<span class="comment"> * This file is part of TelepathyQt4</span>
<span class="comment"> *</span>
<span class="comment"> * Copyright (C) 2009 Collabora Ltd. &lt;http://www.collabora.co.uk/&gt;</span>
<span class="comment"> *</span>
<span class="comment"> * This library is free software; you can redistribute it and/or</span>
<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<span class="comment"> * License as published by the Free Software Foundation; either</span>
<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
<span class="comment"> *</span>
<span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="comment"> * Lesser General Public License for more details.</span>
<span class="comment"> *</span>
<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<span class="comment"> * License along with this library; if not, write to the Free Software</span>
<span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<span class="comment"> */</span>

<span class="preprocessor">#include "roster-widget.h"</span>
<span class="preprocessor">#include "_gen/roster-widget.moc.hpp"</span>

<span class="preprocessor">#include "roster-item.h"</span>

<span class="preprocessor">#include &lt;TelepathyQt4/Types&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/Contact&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/ContactManager&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/PendingConnection&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/PendingContacts&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/PendingOperation&gt;</span>
<span class="preprocessor">#include &lt;TelepathyQt4/PendingReady&gt;</span>

<span class="preprocessor">#include &lt;QAction&gt;</span>
<span class="preprocessor">#include &lt;QDebug&gt;</span>
<span class="preprocessor">#include &lt;QDialog&gt;</span>
<span class="preprocessor">#include &lt;QDialogButtonBox&gt;</span>
<span class="preprocessor">#include &lt;QHBoxLayout&gt;</span>
<span class="preprocessor">#include &lt;QLabel&gt;</span>
<span class="preprocessor">#include &lt;QLineEdit&gt;</span>
<span class="preprocessor">#include &lt;QListWidget&gt;</span>
<span class="preprocessor">#include &lt;QListWidgetItem&gt;</span>
<span class="preprocessor">#include &lt;QMessageBox&gt;</span>
<span class="preprocessor">#include &lt;QPushButton&gt;</span>
<span class="preprocessor">#include &lt;QVBoxLayout&gt;</span>

<span class="keyword">using namespace </span>Tp;

RosterWidget::RosterWidget(QWidget *parent)
    : QWidget(parent)
{
    setWindowTitle(<span class="stringliteral">"Roster"</span>);

    createActions();
    setupGui();
}

RosterWidget::~RosterWidget()
{
}

<span class="keywordtype">void</span> RosterWidget::addConnection(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#4152eed7c9d171dbdddaa4bd8e92b046">ConnectionPtr</a> &amp;conn)
{
    mConns.append(conn);
    connect(conn-&gt;becomeReady(<a class="code" href="classTp_1_1Connection.html#a059ebb9bfc2b5924a386dd84d83ca1d">Connection::FeatureRoster</a>),
            SIGNAL(finished(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *)),
            SLOT(onConnectionReady(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *)));
}

<span class="keywordtype">void</span> RosterWidget::removeConnection(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#4152eed7c9d171dbdddaa4bd8e92b046">ConnectionPtr</a> &amp;conn)
{
    <span class="keywordtype">int</span> i = 0;
    <span class="keywordflow">while</span> (i &lt; mList-&gt;count()) {
        RosterItem *item = (RosterItem *) mList-&gt;item(i);
        <span class="keywordflow">if</span> (item-&gt;contact()-&gt;manager()-&gt;connection() == conn) {
            mList-&gt;takeItem(i);
            <span class="keyword">delete</span> item;
            <span class="keywordflow">continue</span>;
        }
        ++i;
    }
    mConns.removeOne(conn);
    <span class="keywordflow">if</span> (mConns.count() == 0) {
        updateActions();
        mAddBtn-&gt;setEnabled(<span class="keyword">false</span>);
    }
}

<span class="keywordtype">void</span> RosterWidget::createActions()
{
    mAuthAction = <span class="keyword">new</span> QAction(QLatin1String(<span class="stringliteral">"Authorize Contact"</span>), <span class="keyword">this</span>);
    mAuthAction-&gt;setEnabled(<span class="keyword">false</span>);
    connect(mAuthAction,
            SIGNAL(triggered(<span class="keywordtype">bool</span>)),
            SLOT(onAuthActionTriggered(<span class="keywordtype">bool</span>)));
    mDenyAction = <span class="keyword">new</span> QAction(QLatin1String(<span class="stringliteral">"Deny Contact"</span>), <span class="keyword">this</span>);
    mDenyAction-&gt;setEnabled(<span class="keyword">false</span>);
    connect(mDenyAction,
            SIGNAL(triggered(<span class="keywordtype">bool</span>)),
            SLOT(onDenyActionTriggered(<span class="keywordtype">bool</span>)));
    mRemoveAction = <span class="keyword">new</span> QAction(QLatin1String(<span class="stringliteral">"Remove Contact"</span>), <span class="keyword">this</span>);
    mRemoveAction-&gt;setEnabled(<span class="keyword">false</span>);
    connect(mRemoveAction,
            SIGNAL(triggered(<span class="keywordtype">bool</span>)),
            SLOT(onRemoveActionTriggered(<span class="keywordtype">bool</span>)));
    mBlockAction = <span class="keyword">new</span> QAction(QLatin1String(<span class="stringliteral">"Block Contact"</span>), <span class="keyword">this</span>);
    mBlockAction-&gt;setEnabled(<span class="keyword">false</span>);
    mBlockAction-&gt;setCheckable(<span class="keyword">true</span>);
    connect(mBlockAction,
            SIGNAL(triggered(<span class="keywordtype">bool</span>)),
            SLOT(onBlockActionTriggered(<span class="keywordtype">bool</span>)));
}

<span class="keywordtype">void</span> RosterWidget::setupGui()
{
    QVBoxLayout *vbox = <span class="keyword">new</span> QVBoxLayout;

    mList = <span class="keyword">new</span> QListWidget;
    connect(mList,
            SIGNAL(itemSelectionChanged()),
            SLOT(onItemSelectionChanged()));
    vbox-&gt;addWidget(mList);

    mList-&gt;setContextMenuPolicy(Qt::ActionsContextMenu);
    mList-&gt;addAction(mAuthAction);
    mList-&gt;addAction(mDenyAction);
    mList-&gt;addAction(mRemoveAction);
    mList-&gt;addAction(mBlockAction);

    QHBoxLayout *hbox = <span class="keyword">new</span> QHBoxLayout;

    mAddBtn = <span class="keyword">new</span> QPushButton(<span class="stringliteral">"+"</span>);
    mAddBtn-&gt;setEnabled(<span class="keyword">false</span>);
    connect(mAddBtn,
            SIGNAL(clicked(<span class="keywordtype">bool</span>)),
            SLOT(onAddButtonClicked()));
    hbox-&gt;addWidget(mAddBtn);
    hbox-&gt;addStretch(1);

    vbox-&gt;addLayout(hbox);

    setLayout(vbox);

    mAddDlg = <span class="keyword">new</span> QDialog(<span class="keyword">this</span>);
    mAddDlg-&gt;setWindowTitle(<span class="stringliteral">"Add Contact"</span>);
    QVBoxLayout *addDlgVBox = <span class="keyword">new</span> QVBoxLayout;

    QHBoxLayout *addDlgEntryHBox = <span class="keyword">new</span> QHBoxLayout;
    QLabel *label = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Username"</span>);
    addDlgEntryHBox-&gt;addWidget(label);
    mAddDlgEdt = <span class="keyword">new</span> QLineEdit();
    addDlgEntryHBox-&gt;addWidget(mAddDlgEdt);
    addDlgVBox-&gt;addLayout(addDlgEntryHBox);

    QDialogButtonBox *addDlgBtnBox = <span class="keyword">new</span> QDialogButtonBox(
            QDialogButtonBox::Ok | QDialogButtonBox::Cancel, Qt::Horizontal);
    connect(addDlgBtnBox, SIGNAL(accepted()), mAddDlg, SLOT(accept()));
    connect(addDlgBtnBox, SIGNAL(rejected()), mAddDlg, SLOT(reject()));
    addDlgVBox-&gt;addWidget(addDlgBtnBox);

    mAddDlg-&gt;setLayout(addDlgVBox);
}

RosterItem *RosterWidget::createItemForContact(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#58b74925faeec84ce5da45dbf41bebd4">ContactPtr</a> &amp;contact,
        <span class="keywordtype">bool</span> &amp;exists)
{
    RosterItem *item;
    exists = <span class="keyword">false</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mList-&gt;count(); ++i) {
        item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(mList-&gt;item(i));
        <span class="keywordflow">if</span> (item-&gt;contact() == contact) {
            exists = <span class="keyword">true</span>;
            <span class="keywordflow">return</span> item;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">new</span> RosterItem(contact, mList);
}

<span class="keywordtype">void</span> RosterWidget::onConnectionReady(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *op)
{
    <span class="keywordflow">if</span> (op-&gt;<a class="code" href="classTp_1_1PendingOperation.html#32759931a1b2d6380407c6a18abd46e3">isError</a>()) {
        qWarning() &lt;&lt; <span class="stringliteral">"Connection cannot become ready"</span>;
        <span class="keywordflow">return</span>;
    }

    PendingReady *pr = qobject_cast&lt;PendingReady *&gt;(op);
    <a class="code" href="namespaceTp.html#4152eed7c9d171dbdddaa4bd8e92b046">ConnectionPtr</a> conn = <a class="code" href="namespaceTp.html#4152eed7c9d171dbdddaa4bd8e92b046">ConnectionPtr</a>(qobject_cast&lt;Connection *&gt;(pr-&gt;object()));
    connect(conn-&gt;contactManager(),
            SIGNAL(presencePublicationRequested(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#7583feb9ccc05d63136cbb3b58897fb2">Tp::Contacts</a> &amp;)),
            SLOT(onPresencePublicationRequested(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#7583feb9ccc05d63136cbb3b58897fb2">Tp::Contacts</a> &amp;)));

    qDebug() &lt;&lt; <span class="stringliteral">"Connection ready"</span>;
    RosterItem *item;
    <span class="keywordtype">bool</span> exists;
    <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="namespaceTp.html#58b74925faeec84ce5da45dbf41bebd4">ContactPtr</a> &amp;contact, conn-&gt;contactManager()-&gt;allKnownContacts()) {
        exists = <span class="keyword">false</span>;
        item = createItemForContact(contact, exists);
        <span class="keywordflow">if</span> (!exists) {
            connect(item, SIGNAL(changed()), SLOT(updateActions()));
        }
    }

    mAddBtn-&gt;setEnabled(<span class="keyword">true</span>);
}

<span class="keywordtype">void</span> RosterWidget::onPresencePublicationRequested(<span class="keyword">const</span> <a class="code" href="namespaceTp.html#7583feb9ccc05d63136cbb3b58897fb2">Contacts</a> &amp;contacts)
{
    qDebug() &lt;&lt; <span class="stringliteral">"Presence publication requested"</span>;
    RosterItem *item;
    <span class="keywordtype">bool</span> exists;
    <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="namespaceTp.html#58b74925faeec84ce5da45dbf41bebd4">ContactPtr</a> &amp;contact, contacts) {
        exists = <span class="keyword">false</span>;
        item = createItemForContact(contact, exists);
        <span class="keywordflow">if</span> (!exists) {
            connect(item, SIGNAL(changed()), SLOT(updateActions()));
        }
    }
}

<span class="keywordtype">void</span> RosterWidget::onItemSelectionChanged()
{
    updateActions();
}

<span class="keywordtype">void</span> RosterWidget::onAddButtonClicked()
{
    mAddDlgEdt-&gt;clear();
    <span class="keywordtype">int</span> ret = mAddDlg-&gt;exec();
    <span class="keywordflow">if</span> (ret == QDialog::Rejected) {
        <span class="keywordflow">return</span>;
    }

    QString username = mAddDlgEdt-&gt;text();
    <span class="comment">// TODO which connection to use?</span>
    PendingContacts *pcontacts = mConns.first()-&gt;contactManager()-&gt;contactsForIdentifiers(
            QStringList() &lt;&lt; username);
    connect(pcontacts,
            SIGNAL(finished(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *)),
            SLOT(onContactRetrieved(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *)));
}

<span class="keywordtype">void</span> RosterWidget::onAuthActionTriggered(<span class="keywordtype">bool</span> checked)
{
    Q_UNUSED(checked);

    QList&lt;QListWidgetItem *&gt; selectedItems = mList-&gt;selectedItems();
    <span class="keywordflow">if</span> (selectedItems.isEmpty()) {
        <span class="keywordflow">return</span>;
    }

    Q_ASSERT(selectedItems.size() == 1);
    RosterItem *item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(selectedItems.first());
    <span class="keywordflow">if</span> (item-&gt;contact()-&gt;publishState() != <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a8546309c4a1805206fa3d1455f96c44e">Contact::PresenceStateYes</a>) {
        item-&gt;contact()-&gt;authorizePresencePublication();
    }
}

<span class="keywordtype">void</span> RosterWidget::onDenyActionTriggered(<span class="keywordtype">bool</span> checked)
{
    Q_UNUSED(checked);

    QList&lt;QListWidgetItem *&gt; selectedItems = mList-&gt;selectedItems();
    <span class="keywordflow">if</span> (selectedItems.isEmpty()) {
        <span class="keywordflow">return</span>;
    }

    Q_ASSERT(selectedItems.size() == 1);
    RosterItem *item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(selectedItems.first());
    <span class="keywordflow">if</span> (item-&gt;contact()-&gt;publishState() != <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a10b885ebf4687e3de65ef340991913f5">Contact::PresenceStateNo</a>) {
        <span class="comment">// The contact can't see my presence</span>
        item-&gt;contact()-&gt;removePresencePublication();
    }
}

<span class="keywordtype">void</span> RosterWidget::onRemoveActionTriggered(<span class="keywordtype">bool</span> checked)
{
    Q_UNUSED(checked);

    QList&lt;QListWidgetItem *&gt; selectedItems = mList-&gt;selectedItems();
    <span class="keywordflow">if</span> (selectedItems.isEmpty()) {
        <span class="keywordflow">return</span>;
    }

    Q_ASSERT(selectedItems.size() == 1);
    RosterItem *item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(selectedItems.first());
    <span class="keywordflow">if</span> (item-&gt;contact()-&gt;subscriptionState() != <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a10b885ebf4687e3de65ef340991913f5">Contact::PresenceStateNo</a>) {
        <span class="comment">// The contact can't see my presence and I can't see his/her presence</span>
        item-&gt;contact()-&gt;removePresencePublication();
        item-&gt;contact()-&gt;removePresenceSubscription();
    }
}

<span class="keywordtype">void</span> RosterWidget::onBlockActionTriggered(<span class="keywordtype">bool</span> checked)
{
    QList&lt;QListWidgetItem *&gt; selectedItems = mList-&gt;selectedItems();
    <span class="keywordflow">if</span> (selectedItems.isEmpty()) {
        <span class="keywordflow">return</span>;
    }

    Q_ASSERT(selectedItems.size() == 1);
    RosterItem *item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(selectedItems.first());
    item-&gt;contact()-&gt;block(checked);
}

<span class="keywordtype">void</span> RosterWidget::onContactRetrieved(<a class="code" href="classTp_1_1PendingOperation.html">Tp::PendingOperation</a> *op)
{
    PendingContacts *pcontacts = qobject_cast&lt;PendingContacts *&gt;(op);
    QList&lt;ContactPtr&gt; contacts = pcontacts-&gt;contacts();
    Q_ASSERT(pcontacts-&gt;identifiers().size() == 1);
    QString username = pcontacts-&gt;identifiers().first();
    <span class="keywordflow">if</span> (contacts.size() != 1 || !contacts.first()) {
        QMessageBox msgBox;
        msgBox.setText(QString(<span class="stringliteral">"Unable to add contact \"%1\""</span>).arg(username));
        msgBox.exec();
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="namespaceTp.html#58b74925faeec84ce5da45dbf41bebd4">ContactPtr</a> contact = contacts.first();
    qDebug() &lt;&lt; <span class="stringliteral">"Request presence subscription for contact"</span> &lt;&lt; username;
    <span class="comment">// TODO should we have a signal on ContactManager to signal that a contact was</span>
    <span class="comment">//      added to subscribe list?</span>
    <span class="keywordtype">bool</span> exists = <span class="keyword">false</span>;
    RosterItem *item = createItemForContact(contact, exists);
    <span class="keywordflow">if</span> (!exists) {
        connect(item, SIGNAL(changed()), SLOT(updateActions()));
    }
    contact-&gt;requestPresenceSubscription();
}

<span class="keywordtype">void</span> RosterWidget::updateActions()
{
    QList&lt;QListWidgetItem *&gt; selectedItems = mList-&gt;selectedItems();
    <span class="keywordflow">if</span> (selectedItems.isEmpty()) {
        mAuthAction-&gt;setEnabled(<span class="keyword">false</span>);
        mDenyAction-&gt;setEnabled(<span class="keyword">false</span>);
        mRemoveAction-&gt;setEnabled(<span class="keyword">false</span>);
        mBlockAction-&gt;setEnabled(<span class="keyword">false</span>);
        updateActions(0);
        <span class="keywordflow">return</span>;
    }
    Q_ASSERT(selectedItems.size() == 1);

    RosterItem *item = <span class="keyword">dynamic_cast&lt;</span>RosterItem*<span class="keyword">&gt;</span>(selectedItems.first());
    <a class="code" href="namespaceTp.html#58b74925faeec84ce5da45dbf41bebd4">ContactPtr</a> contact = item-&gt;contact();

    ContactManager *manager = contact-&gt;manager();
    qDebug() &lt;&lt; <span class="stringliteral">"Contact"</span> &lt;&lt; contact-&gt;id() &lt;&lt; <span class="stringliteral">"selected"</span>;
    qDebug() &lt;&lt; <span class="stringliteral">" subscription state:"</span> &lt;&lt; contact-&gt;subscriptionState();
    qDebug() &lt;&lt; <span class="stringliteral">" publish state     :"</span> &lt;&lt; contact-&gt;publishState();
    qDebug() &lt;&lt; <span class="stringliteral">" blocked           :"</span> &lt;&lt; contact-&gt;isBlocked();

    <span class="keywordflow">if</span> (manager-&gt;canAuthorizePresencePublication() &amp;&amp;
        contact-&gt;publishState() == <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2abcdb36334777e263084ed8b3ea322d8d">Contact::PresenceStateAsk</a>) {
        mAuthAction-&gt;setEnabled(<span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
        mAuthAction-&gt;setEnabled(<span class="keyword">false</span>);
    }

    <span class="keywordflow">if</span> (manager-&gt;canRemovePresencePublication() &amp;&amp;
        contact-&gt;publishState() != <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a10b885ebf4687e3de65ef340991913f5">Contact::PresenceStateNo</a>) {
        mDenyAction-&gt;setEnabled(<span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
        mDenyAction-&gt;setEnabled(<span class="keyword">false</span>);
    }

    <span class="keywordflow">if</span> (manager-&gt;canRemovePresenceSubscription() &amp;&amp;
        contact-&gt;subscriptionState() != <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a10b885ebf4687e3de65ef340991913f5">Contact::PresenceStateNo</a>) {
        mRemoveAction-&gt;setEnabled(<span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
        mRemoveAction-&gt;setEnabled(<span class="keyword">false</span>);
    }

    <span class="keywordflow">if</span> (manager-&gt;canBlockContacts() &amp;&amp;
        contact-&gt;publishState() == <a class="code" href="classTp_1_1Contact.html#e66ddf301f8d909c6c275b3837e12d2a8546309c4a1805206fa3d1455f96c44e">Contact::PresenceStateYes</a>) {
        mBlockAction-&gt;setEnabled(<span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
        mBlockAction-&gt;setEnabled(<span class="keyword">false</span>);
    }

    mBlockAction-&gt;setChecked(contact-&gt;isBlocked());

    updateActions(item);
}
</pre></div> </div>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%">Copyright &copy; 2009 Collabora Ltd. and Nokia Corporation</td>
<td width="30%" align="right"><div align="right">Telepathy-Qt4 0.1.10</div></td>
</tr></table></div></address>
</body>
</html>
